# IMX296 Global Shutter Camera Configuration
# Author: Anzal KS <anzal.ks@gmail.com>

# System paths and tools
system:
  libcamera_vid_path: "/usr/bin/libcamera-vid"
  libcamera_hello_path: "/usr/bin/libcamera-hello"
  media_ctl_path: "/usr/bin/media-ctl"
  ffmpeg_path: "/usr/bin/ffmpeg"

# Camera settings
camera:
  # Physical sensor specs
  sensor_width: 1456
  sensor_height: 1088
  
  # Target capture specifications
  width: 400 
  height: 400
  fps: 100
  exposure_time_us: 5000 # Set to 5ms for high-speed capture
  
  # PTS file for timestamp tracking
  pts_file_path: "/tmp/camera_timestamps.pts"
  
  # Media-ctl configuration for hardware cropping
  media_ctl:
    device_pattern: "/dev/media%d"
    entity_pattern: "imx296 [0-9]+-[0-9]+"
    bayer_format: "SRGGB10_1X10"

# RAM buffer settings for pre-trigger storage
buffer:
  duration_seconds: 15  # Keep 15 seconds of footage in RAM
  max_frames: 1500      # Maximum number of frames to store in buffer

# LSL stream configuration
lsl:
  stream_name: "IMX296_Metadata"
  stream_type: "CameraEvents"
  channel_count: 4
  nominal_srate: 100

# Recording settings
recording:
  output_dir: "recordings"
  format: "mkv"  # MKV container format

# ntfy.sh notifications for remote control
ntfy:
  server: "https://ntfy.sh"
  topic: "raspie-camera-dawg-123"
  poll_interval_sec: 5.0

# Logging configuration
logging:
  level: "INFO"
  console: true
  file: "logs/imx296_capture.log"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  max_size_mb: 10
  backup_count: 5 